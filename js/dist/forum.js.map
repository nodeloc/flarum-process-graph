{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@nodeloc/flarum-process-graph/webpack/bootstrap","webpack://@nodeloc/flarum-process-graph/webpack/runtime/compat get default export","webpack://@nodeloc/flarum-process-graph/webpack/runtime/define property getters","webpack://@nodeloc/flarum-process-graph/webpack/runtime/hasOwnProperty shorthand","webpack://@nodeloc/flarum-process-graph/webpack/runtime/make namespace object","webpack://@nodeloc/flarum-process-graph/external root \"flarum.core.compat['common/app']\"","webpack://@nodeloc/flarum-process-graph/./src/common/index.ts","webpack://@nodeloc/flarum-process-graph/external root \"flarum.core.compat['forum/app']\"","webpack://@nodeloc/flarum-process-graph/external root \"flarum.core.compat['common/extend']\"","webpack://@nodeloc/flarum-process-graph/external root \"flarum.core.compat['forum/components/UserPage']\"","webpack://@nodeloc/flarum-process-graph/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@nodeloc/flarum-process-graph/external root \"flarum.core.compat['common/components/LoadingIndicator']\"","webpack://@nodeloc/flarum-process-graph/external root \"flarum.core.compat['common/components/Select']\"","webpack://@nodeloc/flarum-process-graph/./src/forum/pages/GraphPage.js","webpack://@nodeloc/flarum-process-graph/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@nodeloc/flarum-process-graph/external root \"flarum.core.compat['common/components/LinkButton']\"","webpack://@nodeloc/flarum-process-graph/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/app'];","import app from 'flarum/common/app';\n\napp.initializers.add('nodeloc/flarum-process-graph', () => {\n  console.log('[nodeloc/flarum-process-graph] Hello, forum and admin!');\n});\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/app'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/UserPage'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LoadingIndicator'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","import app from 'flarum/forum/app';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport LoadingIndicator from 'flarum/common/components/LoadingIndicator';\nimport Select from 'flarum/common/components/Select';\n\nexport default class AuthorizedPage extends UserPage {\n  loading = true;\n  graphData = null;\n  graph = null;\n  resize_handler_bound = false;\n\n  upgrade_info = [\n    { gid: 19, discussion_start: 5, post_count: 10 ,read_permission :10},\n    { gid: 20, discussion_start: 10, post_count: 50 ,read_permission :20},\n    { gid: 21, discussion_start: 50, post_count: 100 ,read_permission :50},\n    { gid: 22, discussion_start: 100, post_count: 200,read_permission :100 },\n    { gid: 23, discussion_start: 200, post_count: 500,read_permission :150 },\n    { gid: 24, discussion_start: 500, post_count: 1000 ,read_permission :200},\n    { gid: 25, discussion_start: 10000, post_count: 100000 ,read_permission :666}\n  ];\n  options = {\n    19: '青铜会员',\n    20: '白银会员',\n    21: '黄金会员',\n    22: '钻石会员',\n    23: '王者会员',\n    24: '宗师会员',\n    25: '神仙会员'\n  };\n  oninit(vnode) {\n    super.oninit(vnode);\n    this.loadUser(m.route.param('username'));\n    this.read_permission = this.user.attribute(\"read_permission\");\n    this.discussionCount = this.user.attribute(\"discussionCount\");\n    this.commentCount =  this.user.attribute(\"commentCount\");\n    this.user_help_count = this.user.attribute(\"bestAnswerCount\");\n    this.upgrade_help_count = 20;\n    this.left_help_count = this.upgrade_help_count-this.user_help_count > 0 ? this.upgrade_help_count-this.user_help_count : 0;\n    this.user_lottery_count = this.user.attribute(\"lotteryCount\");\n    this.upgrade_lottery_count = 20;\n    this.level =0;\n    this.userLevel = 0;\n    this.nextLevel = \"\";\n    this.nextPermission = 0;\n    this.discussionUpgradeInfo  = {};\n    this.count_help = 0;\n    this.count_lottery =0;\n    this.userLevel = this.determineMembershipLevel(this.discussionCount, this.commentCount);\n    this.discussionUpgradeInfo = this.userLevel===0? this.upgrade_info[0]: this.findUpgradeInfo(this.userLevel);\n    this.nextLevel = this.options[this.discussionUpgradeInfo['gid']];\n    this.nextPermission=this.discussionUpgradeInfo['read_permission'];\n\n   // setTimeout(() => {\n      this.loadGraph(); // 在延迟后加载图形数据\n    //}, 100); // 延迟加载内容，以确保在组件完全附加到 DOM 后执行\n  }\n\n  loadGraph() {\n    this.loading = true;\n    app.request({\n      method: 'GET',\n      url: app.forum.attribute('apiUrl') + '/process-graph',\n      params: {user_id: this.user.id()},\n    }).then(result => {\n      this.loading = false;\n      m.redraw();\n      this.renderGraph();\n    });\n  }\n\n  renderGraph() {\n    if (!window.echarts) {\n      setTimeout(() => this.renderGraph(), 200);\n      return;\n    }\n    const graph_container = document.getElementById('process-graph');\n    if (!graph_container) return;\n    const graph_container2 = document.getElementById('process-graph2');\n    if (!graph_container2) return;\n    const graph_container3 = document.getElementById('process-graph3');\n    if (!graph_container3) return;\n    const graph_container4 = document.getElementById('process-graph4');\n    if (!graph_container4) return;\n    this.chart = this.chart || window.echarts.init(graph_container) ;\n    this.chart2 = this.chart2 || window.echarts.init(graph_container2) ;\n    this.chart3 = this.chart3 || window.echarts.init(graph_container3) ;\n    this.chart4 = this.chart4 || window.echarts.init(graph_container4) ;\n    // Determine user's current membership level for discussions\n\n    let leftDiscussionData, leftCommentData;\n    if (this.level && this.options[this.level]) {\n      // 如果 Select 有值，则使用 Select 的值\n      let selectedUpgradeInfo = this.findCurrentInfo(this.level);\n      leftDiscussionData = selectedUpgradeInfo['discussion_start'] - this.discussionCount > 0 ? selectedUpgradeInfo['discussion_start'] - this.discussionCount : 0;\n      leftCommentData = selectedUpgradeInfo['post_count'] - this.commentCount > 0 ? selectedUpgradeInfo['post_count'] - this.commentCount : 0;\n    } else {\n      // 如果 Select 没有值，则使用默认的 discussionUpgradeInfo\n      if (this.discussionUpgradeInfo) {\n        leftDiscussionData = this.discussionUpgradeInfo['discussion_start'] - this.discussionCount > 0 ? this.discussionUpgradeInfo['discussion_start'] - this.discussionCount : 0;\n        leftCommentData = this.discussionUpgradeInfo['post_count'] - this.commentCount > 0 ? this.discussionUpgradeInfo['post_count'] - this.commentCount : 0;\n      } else {\n        // 在这里处理没有 discussionUpgradeInfo 的情况\n        leftDiscussionData = 0;\n        leftCommentData = 0;\n      }\n    }\n    // Set graph data based on upgrade info for discussions\n    this.chart.setOption({\n      title: {\n        text:leftDiscussionData +'主题',//主标题文本\n        subtext:'升级还需要',//副标题文本\n        left:'23%',\n        top:'51%',\n        textStyle:{\n          fontWeight: 'normal',\n          fontSize: 18,\n          color:'#009966',\n          align:'center',\n          left:10\n        },\n        subtextStyle:{\n          fontSize: 13,\n          color:'#6c7a89',\n        }\n      },\n      legend: {\n        top: 20,\n        right:20\n      },\n      series: [\n        {\n          name: 'Access From',\n          type: 'pie',\n          radius: ['70%', '80%'],\n          center: [\"30%\", \"60%\"],\n          avoidLabelOverlap: false,\n          hoverAnimation: false,\n          label: {\n            normal: {\n              show: false,\n              position: \"center\",\n            },\n            emphasis: {\n              show: false,\n            },\n          },\n          labelLine: {\n            normal: {\n              show: false,\n            },\n          },\n          data: [\n            {\n              value: this.commentCount,\n              selected:false,\n              itemStyle: {\n                color: \"#009966\",\n              },\n            },\n            {\n              value: leftDiscussionData,\n              name: \"\",\n              itemStyle: {\n                color: \"#E9EEF4\",\n              },\n              label:{\n                normal:{\n                  show:false,\n                }\n              }\n            },\n          ]\n        }\n      ]\n    });\n\n    // Set graph data based on upgrade info for comments\n    this.chart2.setOption({\n      title: {\n        text:leftCommentData+'回复',//主标题文本\n        subtext:'升级还需要',//副标题文本\n        left:'23%',\n        top:'51%',\n        textStyle:{\n          fontWeight: 'normal',\n          fontSize: 18,\n          color:'#009966',\n          align:'center',\n        },\n        subtextStyle:{\n          fontSize: 13,\n          color:'#6c7a89',\n        }\n      },\n      legend: {\n        top: 20,\n        right:20\n      },\n      series: [\n        {\n          name: 'Access From',\n          type: 'pie',\n          radius: ['70%', '80%'],\n          center: [\"30%\", \"60%\"],\n          avoidLabelOverlap: false,\n          hoverAnimation: false,\n          label: {\n            normal: {\n              show: false,\n              position: \"center\",\n            },\n            emphasis: {\n              show: false,\n            },\n          },\n          labelLine: {\n            normal: {\n              show: false,\n            },\n          },\n          data: [\n            {\n              value: this.discussionCount,\n              selected:false,\n              itemStyle: {\n                color: \"#009966\",\n              },\n            },\n            {\n              value: leftCommentData,\n              name: \"\",\n              itemStyle: {\n                color: \"#E9EEF4\",\n              },\n              label:{\n                normal:{\n                  show:false,\n\n                }\n              }\n            },\n          ]\n        }\n      ]\n    });\n\n    this.chart3.setOption({\n      title: {\n        text:this.left_help_count+'次最佳答案',//主标题文本\n        subtext:'升级还需要',//副标题文本\n        left:'23%',\n        top:'51%',\n        textStyle:{\n          fontWeight: 'normal',\n          fontSize: 18,\n          color:'#009966',\n          align:'center',\n        },\n        subtextStyle:{\n          fontSize: 13,\n          color:'#6c7a89',\n        }\n      },\n      legend: {\n        top: 20,\n        right:20\n      },\n      series: [\n        {\n          name: 'Access From',\n          type: 'pie',\n          radius: ['70%', '80%'],\n          center: [\"30%\", \"60%\"],\n          avoidLabelOverlap: false,\n          hoverAnimation: false,\n          label: {\n            normal: {\n              show: false,\n              position: \"center\",\n            },\n            emphasis: {\n              show: false,\n            },\n          },\n          labelLine: {\n            normal: {\n              show: false,\n            },\n          },\n          data: [\n            {\n              value: this.user_help_count,\n              selected:false,\n              itemStyle: {\n                color: \"#009966\",\n              },\n            },\n            {\n              value: this.left_help_count,\n              name: \"\",\n              itemStyle: {\n                color: \"#E9EEF4\",\n              },\n              label:{\n                normal:{\n                  show:false,\n\n                }\n              }\n            },\n          ]\n        }\n      ]\n    });\n    let leftLotteryCount = this.upgrade_lottery_count- this.user_lottery_count > 0 ? this.upgrade_lottery_count- this.user_lottery_count : 0;\n    this.chart4.setOption({\n      title: {\n        text:'发布'+leftLotteryCount+'次抽奖',//主标题文本\n        subtext:'升级还需要',//副标题文本\n        left:'23%',\n        top:'51%',\n        textStyle:{\n          fontWeight: 'normal',\n          fontSize: 18,\n          color:'#009966',\n          align:'center',\n        },\n        subtextStyle:{\n          fontSize: 13,\n          color:'#6c7a89',\n        }\n      },\n      legend: {\n        top: 20,\n        right:20\n      },\n      series: [\n        {\n          name: 'Access From',\n          type: 'pie',\n          radius: ['70%', '80%'],\n          center: [\"30%\", \"60%\"],\n          avoidLabelOverlap: false,\n          hoverAnimation: false,\n          label: {\n            normal: {\n              show: false,\n              position: \"center\",\n            },\n            emphasis: {\n              show: false,\n            },\n          },\n          labelLine: {\n            normal: {\n              show: false,\n            },\n          },\n          data: [\n            {\n              value: this.user_lottery_count,\n              selected:false,\n              itemStyle: {\n                color: \"#009966\",\n              },\n            },\n            {\n              value: leftLotteryCount,\n              name: \"\",\n              itemStyle: {\n                color: \"#E9EEF4\",\n              },\n              label:{\n                normal:{\n                  show:false,\n\n                }\n              }\n            },\n          ]\n        }\n      ]\n    });\n\n    if (!this.resize_handler_bound) {\n      window.addEventListener('resize', () => {\n        this.chart.resize();\n        this.chart2.resize();\n        this.chart3.resize();\n        this.chart4.resize();\n      });\n      this.resize_handler_bound = true;\n    }\n  }\n\n  determineMembershipLevel(discussionCount, commentCount) {\n    for (let i = this.upgrade_info.length - 1; i >= 0; i--) {\n        let levelInfo = this.upgrade_info[i];\n        if (discussionCount >= levelInfo.discussion_start && commentCount >= levelInfo.post_count) {\n            return levelInfo.gid;\n        }\n    }\n    return 0; // User is below the lowest membership level\n  }\n  findCurrentInfo(level) {\n    return this.upgrade_info.find(info => info.gid == level);\n  }\n  findUpgradeInfo(currentLevel) {\n    let currentIndex = this.upgrade_info.findIndex(info => info.gid == currentLevel);\n    if (currentIndex >= 0 && currentIndex < this.upgrade_info.length - 1) {\n        return this.upgrade_info[currentIndex + 1];\n    }\n    return null; // If the current level is the highest or not found, return null\n  }\n  content() {\n    return <div className=\"process-graph-page\">\n      <h2>{app.translator.trans('nodeloc-process-graph.forum.label.process_graph')}</h2>\n      <div style=\"display: flex; justify-content: space-between; align-items: end;\">\n        <span>{app.translator.trans('nodeloc-process-graph.forum.label.total_times', {total: this.read_permission})} <br/>下一等级  {this.nextLevel} ,  阅读权限  {this.nextPermission}</span>\n        <Select\n          options={this.options}\n          value={this.level}\n          onchange={value => {\n            this.level = value;\n            this.loadGraph();\n          }}\n        >\n        </Select>\n      </div>\n      <div className=\"process-graph-container\">\n        <div className=\"process-graph-item\">\n          <div id=\"process-graph\" style=\"height: 250px;\"></div>\n        </div>\n        <div className=\"process-graph-item\">\n          <div id=\"process-graph2\" style=\"height: 250px;\"></div>\n        </div>\n      </div>\n      <hr/>\n      <h2>乐于助人</h2>\n      <div style=\"display: flex; justify-content: space-between; align-items: end;\">\n        <span>在有求助的标签中回复并被选中为最佳答案为一次助人，20次助人可获得此用户组，用户组权限255</span>\n      </div>\n      <div className=\"process-graph-container\">\n        <div className=\"process-graph-item\">\n          <div id=\"process-graph3\" style=\"height: 250px;\"></div>\n        </div>\n      </div>\n      <hr/>\n      <h2>乐善好施</h2>\n      <div style=\"display: flex; justify-content: space-between; align-items: end;\">\n        <span>发布抽奖20次可获得此用户组，用户组权限255</span>\n      </div>\n      <div className=\"process-graph-container\">\n        <div className=\"process-graph-item\">\n          <div id=\"process-graph4\" style=\"height: 250px;\"></div>\n        </div>\n      </div>\n    </div>;\n  }\n\n}\n","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/LinkButton'];","import app from 'flarum/forum/app';\nimport {extend} from 'flarum/common/extend';\nimport UserPage from 'flarum/forum/components/UserPage';\nimport GraphPage from \"./pages/GraphPage\";\nimport LinkButton from 'flarum/common/components/LinkButton';\napp.initializers.add('nodeloc/flarum-process-graph', () => {\n  app.routes['user.process-graph'] = {\n    path: '/u/:username/process-graph',\n    component: GraphPage\n  };\n  extend(UserPage.prototype, 'navItems', function (items) {\n    items.add(\n      'process-graph',\n      LinkButton.component(\n        {\n          href: app.route('user.process-graph', { username: this.user.username() }),\n          icon: 'fas fa-chart-line',\n        },\n        [\n          app.translator.trans('nodeloc-process-graph.forum.label.process_graph'),\n        ]\n      )\n    );\n  });\n});\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","app","add","console","log","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","AuthorizedPage","_UserPage","_this","_len","arguments","length","args","Array","_key","apply","concat","loading","graphData","graph","resize_handler_bound","upgrade_info","gid","discussion_start","post_count","read_permission","options","subClass","superClass","create","constructor","_proto","oninit","vnode","this","loadUser","m","route","param","user","attribute","discussionCount","commentCount","user_help_count","upgrade_help_count","left_help_count","user_lottery_count","upgrade_lottery_count","level","userLevel","nextLevel","nextPermission","discussionUpgradeInfo","count_help","count_lottery","determineMembershipLevel","findUpgradeInfo","loadGraph","_this2","method","url","params","user_id","id","then","result","redraw","renderGraph","_this3","window","echarts","graph_container","document","getElementById","graph_container2","graph_container3","graph_container4","leftDiscussionData","leftCommentData","chart","init","chart2","chart3","chart4","selectedUpgradeInfo","findCurrentInfo","setOption","title","text","subtext","left","top","textStyle","fontWeight","fontSize","color","align","subtextStyle","legend","right","series","name","type","radius","center","avoidLabelOverlap","hoverAnimation","label","normal","show","position","emphasis","labelLine","data","selected","itemStyle","leftLotteryCount","addEventListener","resize","setTimeout","i","levelInfo","find","info","currentLevel","currentIndex","findIndex","content","_this4","className","trans","style","total","Select","onchange","UserPage","path","component","GraphPage","extend","items","LinkButton","href","username","icon"],"sourceRoot":""}